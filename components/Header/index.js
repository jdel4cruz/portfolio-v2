import React from "react";
import { motion, useScroll } from "framer-motion";
import Link from "next/link";

import NavBar from "../NavBar";

// Contexts
import { useScreenSizeContext } from "../../pages/_app";

const headerVariant = {
  initial: {},
  animate: { transition: { staggerChildren: 0.1 } },
};

const logoVariant = {
  initial: { opacity: 0, x: "-50%" },
  animate: { opacity: 1, x: 0, transition: { duration: 1, ease: "easeOut" } },
};
const hamburgerVariant = {
  initial: { opacity: 0, x: "50%" },
  animate: { opacity: 1, x: 0, transition: { duration: 0.5 } },
};

function Header({ setIsContactOpen, setIsNavMenuOpen }) {
  const { screenSize } = useScreenSizeContext();
  const { scrollYProgress } = useScroll();
  return (
    <>
      <motion.div
        className={`fixed w-screen lg:w-[calc(100%-16px)]  max-h-[180px]
       flex justify-between items-center px-8 md:px-12 py-8  bg-[rgba(255,255,255,0.1)] backdrop-blur z-40`}
        variants={headerVariant}
        initial="initial"
        animate="animate"
      >
        <motion.div
          className="h-16 sm:h-20 aspect-[300/129] relative"
          variants={logoVariant}
        >
          <Link href="/">
            <a>
              <svg
                version="1.0"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 300.000000 129.000000"
                preserveAspectRatio="xMidYMid meet"
              >
                <metadata>
                  Created by potrace 1.10, written by Peter Selinger 2001-2011
                </metadata>
                <g
                  transform="translate(0.000000,129.000000) scale(0.100000,-0.100000)"
                  fill="#16308c"
                  stroke="none"
                >
                  <path
                    d="M909 1137 c-37 -39 -109 -142 -109 -156 0 -5 5 -11 10 -13 6 -2 -3
-39 -21 -88 -44 -121 -64 -189 -95 -320 -15 -63 -35 -126 -46 -141 -11 -14
-22 -44 -25 -67 -5 -34 -1 -44 20 -66 17 -17 37 -26 58 -26 45 0 134 51 212
121 62 56 199 231 226 289 13 27 13 28 -33 -35 -8 -11 -17 -17 -21 -14 -3 4 9
31 28 60 38 59 87 154 87 166 0 4 -20 -28 -43 -72 -70 -129 -164 -265 -233
-337 -36 -38 -67 -68 -69 -68 -3 0 -23 -13 -44 -28 -58 -42 -128 -67 -146 -52
-22 18 0 110 26 110 19 0 39 28 39 53 0 41 82 107 165 133 l40 13 -45 0 c-30
1 -61 -7 -92 -24 -26 -14 -49 -25 -52 -25 -9 0 24 93 54 151 17 33 27 65 24
71 -5 7 -2 8 6 3 10 -6 12 -4 7 9 -4 9 -3 15 2 12 4 -3 23 18 41 47 23 37 26
46 11 33 -11 -10 -23 -27 -26 -37 -9 -27 -29 -24 -21 4 4 12 9 34 11 48 5 34
53 141 88 196 31 49 34 68 11 77 -10 4 -26 -6 -45 -27z m-66 -194 c-9 -21 -17
-51 -19 -68 -3 -42 -22 -87 -33 -80 -14 8 -5 44 29 119 31 69 51 93 23 29z
m-62 -183 c-5 -3 -12 -15 -16 -28 -4 -13 -9 -22 -11 -20 -2 2 2 21 8 41 8 25
14 33 19 25 4 -7 4 -15 0 -18z m-14 -77 c-4 -3 -7 0 -7 7 0 7 3 10 7 7 3 -4 3
-10 0 -14z m-10 -30 c-4 -3 -7 0 -7 7 0 7 3 10 7 7 3 -4 3 -10 0 -14z m289
-100 c-14 -15 -26 -24 -26 -19 0 12 42 57 48 52 2 -3 -8 -17 -22 -33z m-65
-86 c-10 -9 -11 -8 -5 6 3 10 9 15 12 12 3 -3 0 -11 -7 -18z m-61 -62 c-44
-45 -50 -50 -50 -40 0 7 83 85 90 85 2 0 -16 -20 -40 -45z m-76 -69 c-25 -19
-81 -51 -74 -43 14 15 85 64 89 61 3 -3 -4 -11 -15 -18z"
                  />
                  <path
                    d="M1758 1160 c-16 -5 -49 -24 -75 -43 -55 -41 -198 -184 -168 -169 11
6 38 29 60 51 41 43 72 58 39 19 -10 -12 6 -1 36 26 57 51 145 106 169 106 23
0 5 -86 -33 -165 -40 -80 -83 -135 -109 -139 -10 -1 -17 -5 -17 -9 0 -4 0 -11
0 -17 0 -5 11 -10 24 -10 79 0 210 303 150 347 -20 15 -36 15 -76 3z"
                  />
                  <path
                    d="M1130 1129 c-59 -32 -160 -125 -160 -146 0 -8 -7 -16 -15 -19 -8 -3
-21 -20 -30 -37 -14 -29 -12 -29 18 8 141 175 261 250 287 179 14 -36 12 -143
-4 -184 -30 -80 -30 -78 -11 -55 17 20 17 20 10 -5 -4 -14 -22 -58 -41 -97
-18 -40 -31 -73 -28 -73 9 0 73 140 93 204 23 74 27 165 10 199 -13 25 -49 57
-64 57 -5 0 -35 -14 -65 -31z"
                  />
                  <path d="M959 1013 l-24 -28 28 24 c15 14 27 26 27 28 0 8 -8 1 -31 -24z" />
                  <path d="M914 958 c-4 -7 -3 -8 4 -4 12 7 16 16 8 16 -3 0 -8 -5 -12 -12z" />
                  <path
                    d="M1466 901 c-12 -13 -15 -27 -11 -42 5 -13 3 -19 -3 -15 -14 8 -64
-53 -58 -71 3 -8 1 -11 -4 -8 -6 3 -11 0 -12 -7 0 -7 -2 -17 -3 -23 -2 -5 -3
-16 -4 -23 0 -7 -5 -10 -11 -7 -5 3 -7 0 -4 -8 3 -8 -2 -17 -10 -20 -11 -4
-13 -1 -9 11 13 39 -26 -26 -50 -83 -79 -189 -75 -304 12 -350 59 -30 135 -9
238 66 69 50 253 240 325 336 22 29 42 53 44 53 1 0 -10 -30 -25 -67 -39 -95
-44 -118 -27 -132 17 -14 32 6 95 124 41 76 85 135 103 135 4 0 8 -13 8 -29 0
-65 72 -106 104 -59 24 33 19 45 -7 20 -32 -30 -55 -28 -63 6 -18 87 -45 101
-88 47 -17 -22 -41 -51 -54 -65 l-22 -25 20 53 c11 30 27 66 35 82 14 26 11
40 -6 40 -5 0 -20 -23 -34 -50 -53 -105 -342 -404 -455 -471 -64 -37 -79 -42
-137 -43 -84 -1 -97 13 -89 101 10 118 69 259 176 423 34 52 56 89 49 83 -22
-22 -30 -14 -13 12 19 30 14 33 -10 6z m-36 -95 c0 -3 -5 -8 -12 -12 -7 -4 -8
-3 -4 4 7 12 16 16 16 8z m478 -151 c-6 -14 -13 -23 -15 -21 -5 5 15 46 22 46
3 0 -1 -11 -7 -25z m-568 -3 c0 -4 -5 -13 -10 -18 -6 -6 -24 -42 -40 -80 -16
-38 -30 -63 -30 -57 0 21 53 143 62 143 5 0 6 5 3 10 -3 6 -1 10 4 10 6 0 11
-4 11 -8z m541 -55 c-10 -9 -11 -8 -5 6 3 10 9 15 12 12 3 -3 0 -11 -7 -18z
m-627 -161 c-3 -21 -8 -35 -11 -32 -2 2 -1 20 3 40 3 21 8 35 11 32 2 -2 1
-20 -3 -40z"
                  />
                  <path d="M560 871 c0 -11 29 -35 35 -29 10 9 -7 38 -21 38 -8 0 -14 -4 -14 -9z" />
                  <path
                    d="M2685 868 c-44 -25 -124 -100 -165 -155 -60 -79 -120 -142 -153 -159
-24 -13 -28 -13 -33 1 -9 23 12 99 47 167 28 55 30 78 9 78 -5 0 -17 -15 -26
-32 -17 -34 -130 -174 -159 -198 -15 -12 -15 -10 -9 16 4 16 20 59 36 96 32
76 35 98 12 98 -21 0 -76 -121 -82 -180 -4 -41 -1 -50 16 -59 29 -16 45 -6 83
50 19 27 36 49 39 49 3 0 4 -18 2 -39 -3 -30 1 -44 17 -60 30 -30 55 -26 99
13 21 19 47 34 57 33 15 -2 21 5 23 24 4 37 94 143 165 195 67 50 89 47 62 -7
-25 -49 -125 -169 -157 -188 -23 -15 -25 -19 -14 -39 l12 -22 34 23 c41 28 93
47 126 47 34 0 30 -11 -17 -45 -66 -48 -221 -218 -262 -287 -41 -69 -48 -131
-16 -151 44 -28 218 107 302 233 45 67 81 171 73 210 -4 24 0 33 22 48 45 32
110 62 134 62 20 0 21 1 6 16 -20 20 -61 9 -130 -35 -42 -27 -52 -29 -107 -24
l-61 6 25 31 c13 17 36 56 51 86 24 49 25 57 12 80 -15 28 -43 35 -73 18z m90
-358 c-46 -140 -246 -350 -333 -350 -21 0 -23 3 -17 28 19 78 158 253 281 352
72 57 79 61 82 41 2 -12 -4 -44 -13 -71z"
                  />
                  <path
                    d="M515 763 c-12 -63 -50 -165 -62 -170 -7 -3 -10 -10 -7 -15 4 -6 1 -8
-7 -6 -19 7 -91 -30 -84 -42 4 -6 8 -10 11 -10 3 0 2 5 -2 12 -5 8 -2 9 10 5
11 -5 15 -3 10 5 -5 8 -2 9 10 5 9 -4 15 -3 11 3 -3 5 4 8 15 7 11 -1 20 -6
20 -11 0 -22 -116 -226 -161 -283 -84 -105 -165 -157 -208 -133 -40 21 -16
109 54 194 19 24 35 48 35 54 0 11 59 57 73 57 5 0 15 9 23 20 8 11 18 19 22
18 4 0 6 3 4 8 -1 6 6 9 15 7 11 -2 17 2 15 11 -2 8 3 11 12 8 17 -7 32 8 18
17 -16 10 -137 -81 -214 -161 -82 -85 -105 -135 -93 -199 19 -105 121 -81 252
59 69 74 110 140 168 270 39 86 42 90 93 114 45 20 59 23 84 14 27 -10 29 -9
17 5 -11 13 -25 15 -71 10 -32 -3 -58 -2 -58 3 0 5 7 25 15 44 19 46 19 81 0
97 -12 10 -15 7 -20 -17z m-265 -307 c0 -3 -5 -8 -12 -12 -7 -4 -8 -3 -4 4 7
12 16 16 16 8z"
                  />
                </g>
              </svg>
            </a>
          </Link>
        </motion.div>

        {screenSize[0] >= 1024 ? (
          <NavBar setIsContactOpen={setIsContactOpen} />
        ) : (
          <motion.button
            onClick={() => setIsNavMenuOpen(true)}
            variants={hamburgerVariant}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width={screenSize[0] >= 640 ? "64" : "48"}
              height={screenSize[0] >= 640 ? "64" : "48"}
              fill="#395BD9"
              className="bi bi-list"
              viewBox="0 0 16 16"
            >
              <path
                fillRule="evenodd"
                d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"
              />
            </svg>
          </motion.button>
        )}
      </motion.div>
      {screenSize[0] >= 1024 && (
        <motion.div
          className="fixed  right-0 w-4 h-screen bg-tertiary z-50"
          style={{ scaleY: scrollYProgress, originY: 0 }}
        />
      )}
    </>
  );
}

export default Header;
